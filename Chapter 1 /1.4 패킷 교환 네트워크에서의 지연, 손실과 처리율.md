# 1.4 패킷 교환 네트워크에서의 지연, 손실과 처리율
컴퓨터 네트워크는 반드시 두 종단 시스템 간에 처리율(전달될 수 있는 초당 데이터의 양)을<br/>
제한하여 종단 시스템간의 지연을 야기하며 실제로 패킷을 잃어버리기도 한다.<br/>
이러한 문제들을 어떻게 다룰 것인가?<br/>

<br/>

## 1.4.1 패킷 교환 네트워크에서의 지연 개요
패킷은 한 호스트에서 시작하고 다른 호스트로 전달 되는 동안 다양한 지연을 겪게 된다.<br/>
- `노드 처리 지연(nodal processing delay)`
- `큐잉 지연(queuing delay)`
- `전송 지연(transmission delay)`
- `전파 지연(propagation delay)`
- 위와 같은 지연들이 쌓여서 `전체 노드 지연(total nodal delay)`을 일으킨다.<br/>

<br/>

### 지연 유형
아래 그림은 지연되는 과정<br/>
1. 패킷이 업스트림 노드로부터 라우터 A에 도착<br/>
2. 라우터 A는 그 패킷에 대한 출력 링크를 결정하기 위해 패킷 헤더 조사<br/>
3. 선택된 링크를 통해 패킷을 라우터 B로 전송<br/>
3-1. 링크에 현재 전송되는 다른 패킷이 없고, 큐의 맨 앞에 있다면 바로 링크로 전송<br/>
3-2. **링크가 이용중이거나, 큐에 대기하는 패킷이 있다면** 큐의 맨 뒤로 들어간다.<br/>

<p align="center"><img width="600" src="https://github.com/jmKim02/ComputerNetworking_A-Top-Down-Approach/assets/174222202/f66e163e-fa59-4037-9857-9cb9e4bc95b2">

<br/>
<br/>

### 처리 지연(processing delay)
📌 `패킷 헤더`를 조사하고 그 패킷을 어디로 보낼지를 결정하는 시간<br/>
<br/>

- `처리 지연`은 업스트림 노드에서 라우터 A로 패킷의 비트를 전송하면서 발생하는 **패킷의 비트 오류**를<br/>
  조사하는 데 필요한 시간과 같은 요소를 포함할 수도 있다.
- 고속 라우터에서 처리 지연은 일반적으로 수 마이크로초

 <br/>

### 큐잉 지연(queuing delay)
📌 패킷이 큐에서 링크로 전송되기를 기다리는 시간<br/>
<br/>

- 패킷의 `큐잉 지연 길이`는 큐에서 대기중인 다른 패킷의 수에 의해 결정된다.
  - 당연히 패킷의 지연은 패킷마다 상당이 다르다.
  - 큐가 비어 있고 다른 패킷이 전송 중인 상태가 아니라면 큐잉 지연은 0
  - 트래픽이 많고 다른 많은 패킷이 전송 대기중이면 큐잉 지연은 매우 길어질 것
- 현실에서 큐잉 지연은 수 마이크로초 ~ 수 밀리초

<br/>

### 전송 지연(transmission delay)
📌 앞서 도착한 패킷의 모든 비트를 링크로 전송하는 데 필요한 시간<br/>
<br/>

- 패킷의 길이를 L비트, 라우터 A에서 라우터 B까지 링크 전송률은 R bps로 나타낸다.
  - R은 링크의 전송률에 의해 결정
  - e.g.) 10 Mbps 이더넷 링크의 경우 전송률 R은 10 Mbps
- `전송 지연`은 `L/R`이다.
- 일반적으로 수 마이크로초 ~ 수 밀리초

<br/>

### 전파 지연(propagation delay)
📌 링크의 처음부터 라우터 B까지의 전파에 필요한 시간<br/>
<br/>

- 일단 비트가 링크에 전해지면 라우터 B까지 전해져야 한다.
- 비트는 링크의 전파 속도로 전파된다.
- `전파 속도`는 링크의 **물리 매체(광섬유, 꼬임쌍선 등)**에 따라 다른데 범위는 다음과 같다
  - 2 * 10<sup>8<sup/> meters/sec to 3 * 10<sup>8<sup/> meters/sec
